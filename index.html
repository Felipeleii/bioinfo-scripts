<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Scripts Bioinform치tica</title>
  <style>
    body { font-family: sans-serif; margin: 40px; background-color: #f9f9f9; }
    h1 { color: #2c3e50; }
    select, button { font-size: 16px; padding: 6px; }
    pre { background: #eef; padding: 10px; border-radius: 6px; white-space: pre-wrap; }
    .download { margin-top: 10px; display: inline-block; padding: 6px 12px; background: #2c3e50; color: white; border-radius: 4px; text-decoration: none; }
  </style>
</head>
<body>
<h1>游닄 Scripts Bioinform치tica</h1>
<p>Escolha um script para visualizar e baixar:</p>
<select id="scriptSelector" onchange="showScript()">
  <option value="">-- selecione --</option>
  <option value="restaurar_tormes.sh">restaurar_tormes.sh</option>
  <option value="Dockerfile">Dockerfile</option>
  <option value="renomear_fastq.py">renomear_fastq.py</option>
  <option value="renomear_fastq.py">renomear_fasta.py</option>
  <option value="separar_contigs_isolado.py">separar_contigs_isolado.py</option>
  <option value="eucast_formula_google_sheets.txt">eucast_formula_google_sheets.txt</option>
  <option value="mesclar_fastq_nanopore.sh">mesclar_fastq_nanopore.sh</option>
  <option value="converter_datas_mes_ano.py">converter_datas_mes_ano.py</option>
</select>
<pre id="scriptContent"></pre>
<a id="downloadLink" class="download" href="#" download>游닌 Baixar script</a>
<script>
const scripts = {
  "restaurar_tormes.sh": "#!/bin/bash\n\necho \"[INFO] Removendo ambiente antigo tormes-1.3.0 (se existir)...\"\nconda deactivate\nconda env remove -n tormes-1.3.0 -y\n\necho \"[INFO] Restaurando ambiente TORMES a partir do backup...\"\nconda env create -f tormes-1.3.0_backup.yml\n\necho \"[INFO] Ambiente TORMES restaurado com sucesso!\"\necho \"Use: conda activate tormes-1.3.0\"\n",
  "Dockerfile": "FROM continuumio/miniconda3:4.10.3\n\nCOPY tormes-1.3.0_backup.yml /tmp/tormes-1.3.0_backup.yml\nRUN conda env create -f /tmp/tormes-1.3.0_backup.yml\nSHELL [\"/bin/bash\", \"-c\"]\nRUN echo \"conda activate tormes-1.3.0\" >> ~/.bashrc\nENV PATH /opt/conda/envs/tormes-1.3.0/bin:$PATH\nENTRYPOINT [\"/bin/bash\"]\n",
  "renomear_fastq.py": "import os\nimport re\n\ndef renomear_fastq_pasta(pasta):\n    for nome_arquivo in os.listdir(pasta):\n        if nome_arquivo.endswith('.fastq.gz'):\n            partes = nome_arquivo.split(\"_\")\n            novo_nome = f\"{partes[0]}_{partes[-1]}\"\n            os.rename(os.path.join(pasta, nome_arquivo), os.path.join(pasta, novo_nome))\n",
  "renomear_fasta.py": "renomear_fasta.py": "import os\n\ndef renomear_fasta_pasta(pasta):\n    for nome_arquivo in os.listdir(pasta):\n        if nome_arquivo.endswith('.fasta'):\n            partes = nome_arquivo.split(\"_\")\n            novo_nome = f\"{partes[0]}.fasta\"\n            caminho_antigo = os.path.join(pasta, nome_arquivo)\n            caminho_novo = os.path.join(pasta, novo_nome)\n            if os.path.exists(caminho_novo):\n                print(f\"[Aviso] Arquivo {caminho_novo} j치 existe! Pulando {nome_arquivo}.\")\n            else:\n                os.rename(caminho_antigo, caminho_novo)\n                print(f\"{nome_arquivo} renomeado para {novo_nome}\")"
  "separar_contigs_isolado.py": "from Bio import SeqIO\nfrom collections import defaultdict\nimport os\nimport re\n\ndef separar_contigs_por_isolado(fasta_path, output_dir):\n    isolados = defaultdict(list)\n    for record in SeqIO.parse(fasta_path, \"fasta\"):\n        match = re.search(r\"(S\\d+_\\d+|N\\d+_\\d+|T\\d+_\\d+)\", record.description)\n        if match:\n            isolados[match.group()].append(record)\n\n    os.makedirs(output_dir, exist_ok=True)\n    for isolado, contigs in isolados.items():\n        with open(os.path.join(output_dir, f\"{isolado}.fasta\"), \"w\") as out_f:\n            SeqIO.write(contigs, out_f, \"fasta\")\n",
  "eucast_formula_google_sheets.txt": "=IFS(AB2=\"Klebsiella pneumoniae\", A2<=8, \"S\", AB2=\"Acinetobacter baumannii\", A2<=4, \"S\", VERDADEIRO, \"R\")",
  "mesclar_fastq_nanopore.sh": "cat */*.fastq.gz > ~/dados_combinados.fastq.gz",
  "converter_datas_mes_ano.py": "import pandas as pd\ndf['Data'] = pd.to_datetime(df['Data']).dt.to_period('M')",
};

function showScript() {
  const select = document.getElementById("scriptSelector");
  const scriptName = select.value;
  const content = scripts[scriptName] || "";
  document.getElementById("scriptContent").textContent = content.replace(/\n/g, "\n");
  const blob = new Blob([content.replace(/\n/g, "\n")], { type: "text/plain" });
  document.getElementById("downloadLink").href = URL.createObjectURL(blob);
  document.getElementById("downloadLink").download = scriptName;
}
</script>
</body>
</html>
