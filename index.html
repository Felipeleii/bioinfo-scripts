<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bioinfo Scripts v3.0 - Ferramentas de Bioinform√°tica</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    main, section, form, input, textarea, select, button {
    position: relative;
    z-index: 1;
}
    <style>
        :root {
            --primary-color: #2E7D32;
            --secondary-color: #1976D2;
            --accent-color: #F57C00;
            --dark-bg: #121212;
            --card-bg: #1E1E1E;
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0B0;
            --success-color: #4CAF50;
            --error-color: #F44336;
            --border-color: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Mobile Menu */
        .mobile-menu {
            display: none;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--card-bg);
                flex-direction: column;
                padding: 1rem;
                gap: 1rem;
            }

            .nav-links.active {
                display: flex;
            }

            .mobile-menu {
                display: block;
            }
        }

        /* Main Content */
        main {
            max-width: 1200px;
            margin: 5rem auto 2rem;
            padding: 2rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 4rem 0;
            background: linear-gradient(135deg, rgba(46,125,50,0.1), rgba(25,118,210,0.1));
            border-radius: 20px;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, var(--accent-color) 0%, transparent 70%);
            opacity: 0.03;
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Section Styles */
        .section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.05));
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .card:hover::before {
            transform: translateX(0);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .card h3 {
            color: var(--secondary-color);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        input[type="text"],
        input[type="file"],
        textarea,
        select {
            width: 100%;
            padding: 0.75rem;
            background: var(--dark-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="file"]:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(25,118,210,0.2);
        }

        textarea {
            min-height: 200px;
            resize: vertical;
        }

        /* Button Styles */
        .btn {
            padding: 0.75rem 2rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.2);
            transition: left 0.3s ease;
        }

        .btn:hover::before {
            left: 0;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--accent-color), #FF8F00);
        }

        /* Tool Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .tool-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-color: var(--secondary-color);
        }

        .tool-icon {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }

        .tool-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .tool-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Output Styles */
        .output-area {
            background: var(--dark-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 400px;
            overflow-y: auto;
        }

        /* Loading Spinner */
        .spinner {
            display: none;
            width: 50px;
            height: 50px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Footer */
        footer {
            background: var(--card-bg);
            padding: 2rem 0;
            text-align: center;
            border-top: 1px solid var(--border-color);
            margin-top: 4rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
        }

        .social-links a {
            color: var(--text-secondary);
            font-size: 1.5rem;
            transition: color 0.3s ease;
        }

        .social-links a:hover {
            color: var(--secondary-color);
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 0.75rem 1.5rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab.active {
            color: var(--secondary-color);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--secondary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Alert Messages */
        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .alert-success {
            background: rgba(76,175,80,0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .alert-error {
            background: rgba(244,67,54,0.2);
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

        /* Progress Bar */
        .progress-container {
            background: var(--dark-bg);
            border-radius: 10px;
            padding: 3px;
            margin-top: 1rem;
            display: none;
        }

        .progress-bar {
            height: 20px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 7px;
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Smooth Scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section Navigation */
        .section-nav {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 100;
        }

        .section-nav a {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--border-color);
            transition: all 0.3s ease;
        }

        .section-nav a.active,
        .section-nav a:hover {
            background: var(--secondary-color);
            transform: scale(1.5);
        }

        @media (max-width: 1024px) {
            .section-nav {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <a href="#" class="logo">
                <i class="fas fa-dna"></i>
                Bioinfo Scripts v3.0
            </a>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home">In√≠cio</a></li>
                <li><a href="#tools">Ferramentas</a></li>
                <li><a href="#multifasta">MultiFASTA</a></li>
                <li><a href="#bactopia">Bactopia</a></li>
                <li><a href="#scripts">Scripts</a></li>
                <li><a href="#about">Sobre</a></li>
                <li><a href="https://github.com/Felipeleii/bioinfo-scripts" target="_blank"><i class="fab fa-github"></i></a></li>
            </ul>
            <div class="mobile-menu" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
        </nav>
    </header>

    <!-- Section Navigation -->
    <div class="section-nav">
        <a href="#home" class="active"></a>
        <a href="#tools"></a>
        <a href="#multifasta"></a>
        <a href="#bactopia"></a>
        <a href="#scripts"></a>
        <a href="#about"></a>
    </div>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section id="home" class="hero">
            <h1>Bioinfo Scripts v3.0</h1>
            <p>Ferramentas avan√ßadas de bioinform√°tica para an√°lise de genomas bacterianos e sequenciamento Illumina</p>
        </section>

        <!-- Tools Section -->
        <section id="tools" class="section">
            <h2 class="section-title">
                <i class="fas fa-tools"></i>
                Ferramentas Principais
            </h2>
            <div class="tools-grid">
                <a href="#multifasta" class="tool-card">
                    <i class="fas fa-file-alt tool-icon"></i>
                    <h3 class="tool-title">Gerador MultiFASTA</h3>
                    <p class="tool-description">Crie arquivos multiFASTA com rastreamento autom√°tico de origem das sequ√™ncias</p>
                </a>
                <a href="#bactopia" class="tool-card">
                    <i class="fas fa-bacteria tool-icon"></i>
                    <h3 class="tool-title">Bactopia Prepare GUI</h3>
                    <p class="tool-description">Interface gr√°fica para prepara√ß√£o de dados do pipeline Bactopia</p>
                </a>
                <a href="#fastq-stats" class="tool-card">
                    <i class="fas fa-chart-line tool-icon"></i>
                    <h3 class="tool-title">FASTQ Stats Calculator</h3>
                    <p class="tool-description">Calcule estat√≠sticas b√°sicas de arquivos FASTQ (reads, qualidade, GC%)</p>
                </a>
                <a href="#primer-design" class="tool-card">
                    <i class="fas fa-dna tool-icon"></i>
                    <h3 class="tool-title">Primer Designer</h3>
                    <p class="tool-description">Desenhe primers para PCR com an√°lise de Tm e estruturas secund√°rias</p>
                </a>
                <a href="#genome-stats" class="tool-card">
                    <i class="fas fa-chart-bar tool-icon"></i>
                    <h3 class="tool-title">Genome Statistics</h3>
                    <p class="tool-description">Calcule N50, tamanho do genoma, n√∫mero de contigs e outras m√©tricas</p>
                </a>
                <a href="#mlst-tool" class="tool-card">
                    <i class="fas fa-fingerprint tool-icon"></i>
                    <h3 class="tool-title">MLST Analyzer</h3>
                    <p class="tool-description">An√°lise de Multi-Locus Sequence Typing para tipagem bacteriana</p>
                </a>
            </div>
        </section>

        <!-- MultiFASTA Generator Section -->
        <section id="multifasta" class="section">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-file-alt"></i>
                    Gerador de Arquivos MultiFASTA Adaptado
                </h2>
                <p>Esta ferramenta permite criar arquivos multiFASTA onde o nome do arquivo de origem √© automaticamente incorporado ao cabe√ßalho de cada contig, facilitando o rastreamento da amostra de origem.</p>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('single', this)">Arquivo √önico</button>
                    <button class="tab" onclick="switchTab('batch', this)">Lote de Arquivos</button>
                </div>

                <div id="single" class="tab-content active">
                    <form id="singleFastaForm">
                        <div class="form-group">
                            <label for="fastaFile">Arquivo FASTA:</label>
                            <input type="file" id="fastaFile" accept=".fasta,.fa,.fna" required>
                        </div>
                        <div class="form-group">
                            <label for="samplePrefix">Prefixo da Amostra (opcional):</label>
                            <input type="text" id="samplePrefix" placeholder="Ex: Sample001">
                        </div>
                        <button type="submit" class="btn">
                            <i class="fas fa-magic"></i>
                            Processar FASTA
                        </button>
                    </form>
                </div>

                <div id="batch" class="tab-content">
                    <form id="batchFastaForm">
                        <div class="form-group">
                            <label for="fastaFiles">Arquivos FASTA (m√∫ltiplos):</label>
                            <input type="file" id="fastaFiles" accept=".fasta,.fa,.fna" multiple required>
                        </div>
                        <div class="form-group">
                            <label for="mergeOption">Op√ß√£o de Mesclagem:</label>
                            <select id="mergeOption">
                                <option value="separate">Manter arquivos separados</option>
                                <option value="merge">Mesclar em um √∫nico arquivo</option>
                            </select>
                        </div>
                        <button type="submit" class="btn">
                            <i class="fas fa-layer-group"></i>
                            Processar Lote
                        </button>
                    </form>
                </div>

                <div class="progress-container" id="fastaProgress">
                    <div class="progress-bar" id="fastaProgressBar">0%</div>
                </div>

                <div id="fastaOutput" class="output-area" style="display: none;">
                    <!-- Output will be displayed here -->
                </div>

                <div id="fastaActions" style="display: none; margin-top: 1rem;">
                    <button class="btn btn-secondary" onclick="downloadFasta()">
                        <i class="fas fa-download"></i>
                        Baixar Resultado
                    </button>
                    <button class="btn" onclick="copyToClipboard('fastaOutput')">
                        <i class="fas fa-copy"></i>
                        Copiar para √Årea de Transfer√™ncia
                    </button>
                </div>
            </div>
        </section>

        <!-- Bactopia Prepare GUI Section -->
        <section id="bactopia" class="section">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-bacteria"></i>
                    Bactopia Prepare GUI
                </h2>
                <p>Interface gr√°fica intuitiva para preparar dados de entrada para o pipeline Bactopia. Organize seus arquivos FASTQ e metadados facilmente.</p>

                <form id="bactopiaForm">
                    <div class="form-group">
                        <label for="projectName">Nome do Projeto:</label>
                        <input type="text" id="projectName" required placeholder="Ex: Ecoli_WGS_2024">
                    </div>

                    <div class="form-group">
                        <label for="fastqDir">Diret√≥rio dos arquivos FASTQ:</label>
                        <input type="text" id="fastqDir" placeholder="/caminho/para/fastq" required>
                    </div>

                    <div class="form-group">
                        <label for="genome">Genoma de Refer√™ncia (opcional):</label>
                        <input type="file" id="genome" accept=".fasta,.fa,.fna">
                    </div>

                    <div class="form-group">
                        <label for="sampleSheet">Planilha de Amostras:</label>
                        <textarea id="sampleSheet" placeholder="sample,fastq_1,fastq_2&#10;Sample1,sample1_R1.fastq.gz,sample1_R2.fastq.gz&#10;Sample2,sample2_R1.fastq.gz,sample2_R2.fastq.gz" rows="5"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="bactopiaParams">Par√¢metros Adicionais:</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="qc" checked>
                                <span>Controle de Qualidade</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="assembly" checked>
                                <span>Montagem de Genoma</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="annotation" checked>
                                <span>Anota√ß√£o</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="mlst" checked>
                                <span>MLST</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" id="amr" checked>
                                <span>Resist√™ncia Antimicrobiana</span>
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="btn">
                        <i class="fas fa-cog"></i>
                        Gerar Configura√ß√£o Bactopia
                    </button>
                </form>

                <div id="bactopiaOutput" class="output-area" style="display: none;">
                    <!-- Bactopia configuration will be displayed here -->
                </div>

                <div id="bactopiaActions" style="display: none; margin-top: 1rem;">
                    <button class="btn btn-secondary" onclick="downloadBactopiaConfig()">
                        <i class="fas fa-download"></i>
                        Baixar Configura√ß√£o
                    </button>
                    <button class="btn" onclick="generateBactopiaCommand()">
                        <i class="fas fa-terminal"></i>
                        Gerar Comando
                    </button>
                </div>
            </div>
        </section>

        <!-- FASTQ Stats Calculator Section -->
        <section id="fastq-stats" class="section">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-chart-line"></i>
                    FASTQ Statistics Calculator
                </h2>
                <p>Analise arquivos FASTQ e obtenha estat√≠sticas detalhadas sobre suas sequ√™ncias.</p>

                <form id="fastqStatsForm">
                    <div class="form-group">
                        <label for="fastqFile">Arquivo FASTQ:</label>
                        <input type="file" id="fastqFile" accept=".fastq,.fq,.fastq.gz" required>
                    </div>
                    <button type="submit" class="btn">
                        <i class="fas fa-calculator"></i>
                        Calcular Estat√≠sticas
                    </button>
                </form>

                <div class="spinner" id="fastqSpinner"></div>

                <div id="fastqStatsOutput" style="display: none;">
                    <h3>Estat√≠sticas do Arquivo:</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">Total de Reads</h4>
                            <p id="totalReads" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">Total de Bases</h4>
                            <p id="totalBases" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">Comprimento M√©dio</h4>
                            <p id="avgLength" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">GC Content (%)</h4>
                            <p id="gcContent" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">Qualidade M√©dia</h4>
                            <p id="avgQuality" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="stat-card" style="background: var(--dark-bg); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 0.5rem;">N50</h4>
                            <p id="n50" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                    </div>

                    <div style="margin-top: 2rem;">
                        <h3>Distribui√ß√£o de Comprimento de Reads</h3>
                        <canvas id="lengthChart" style="max-height: 300px;"></canvas>
                    </div>

                    <div style="margin-top: 2rem;">
                        <h3>Distribui√ß√£o de Qualidade</h3>
                        <canvas id="qualityChart" style="max-height: 300px;"></canvas>
                    </div>

                    <button class="btn btn-secondary" onclick="downloadFastqReport()" style="margin-top: 1rem;">
                        <i class="fas fa-download"></i>
                        Baixar Relat√≥rio
                    </button>
                </div>
            </div>
        </section>

        <!-- Scripts Section -->
        <section id="scripts" class="section">
            <h2 class="section-title">
                <i class="fas fa-code"></i>
                Scripts √öteis
            </h2>

            <div class="card">
                <h3>Scripts de An√°lise de Qualidade</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>multiqc_report.py</strong> - Agrega√ß√£o de relat√≥rios MultiQC
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>trim_adapters.sh</strong> - Remo√ß√£o de adaptadores com Trimmomatic
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Scripts de Montagem</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>spades_assembly.sh</strong> - Montagem com SPAdes
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>unicycler_hybrid.sh</strong> - Montagem h√≠brida Illumina + ONT
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>assembly_stats.py</strong> - Estat√≠sticas de montagem
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Scripts de Anota√ß√£o</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>prokka_batch.sh</strong> - Anota√ß√£o em lote com Prokka
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>bakta_annotate.sh</strong> - Anota√ß√£o com Bakta
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>extract_genes.py</strong> - Extra√ß√£o de genes espec√≠ficos
                    </li>
                </ul>
            </div>

            <div class="card">
                <h3>Scripts de An√°lise Comparativa</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>ani_calculator.py</strong> - C√°lculo de ANI (Average Nucleotide Identity)
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>snp_analysis.sh</strong> - An√°lise de SNPs com snippy
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>pangenome_roary.sh</strong> - An√°lise de pangenoma com Roary
                    </li>
                </ul>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section">
            <div class="card">
                <h2 class="section-title">
                    <i class="fas fa-info-circle"></i>
                    Sobre o Projeto
                </h2>
                <p>O <strong>Bioinfo Scripts v3.0</strong> √© uma cole√ß√£o unificada de ferramentas e scripts para an√°lise de genomas bacterianos, com foco especial em dados de sequenciamento Illumina.</p>
                
                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Caracter√≠sticas Principais:</h3>
                <ul style="list-style: none; padding-left: 0;">
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-check" style="color: var(--success-color);"></i>
                        Interface web intuitiva e responsiva
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-check" style="color: var(--success-color);"></i>
                        Processamento de arquivos FASTA/FASTQ no navegador
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-check" style="color: var(--success-color);"></i>
                        Integra√ß√£o com pipelines populares (Bactopia, Prokka, SPAdes)
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-check" style="color: var(--success-color);"></i>
                        Scripts otimizados para an√°lise de WGS bacteriano
                    </li>
                    <li style="margin-bottom: 0.5rem;">
                        <i class="fas fa-check" style="color: var(--success-color);"></i>
                        Documenta√ß√£o completa e exemplos pr√°ticos
                    </li>
                </ul>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Instala√ß√£o e Uso:</h3>
                <div class="output-area">
# Clone o reposit√≥rio
git clone https://github.com/Felipeleii/bioinfo-scripts.git
cd bioinfo-scripts

# Instale as depend√™ncias
conda env create -f environment.yml
conda activate bioinfo-scripts

# Execute os scripts
./scripts/run_analysis.sh
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Scripts Dispon√≠veis para Download:</h3>
                <div class="tools-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                    <div class="tool-card" style="padding: 1rem;">
                        <i class="fas fa-download" style="color: var(--success-color);"></i>
                        <h4 style="font-size: 1rem; margin: 0.5rem 0;">illumina_qc_pipeline.sh</h4>
                        <p style="font-size: 0.85rem;">Pipeline completo de QC para dados Illumina</p>
                    </div>
                    <div class="tool-card" style="padding: 1rem;">
                        <i class="fas fa-download" style="color: var(--success-color);"></i>
                        <h4 style="font-size: 1rem; margin: 0.5rem 0;">bacterial_assembly.py</h4>
                        <p style="font-size: 0.85rem;">Automatiza√ß√£o de montagem com SPAdes/Unicycler</p>
                    </div>
                    <div class="tool-card" style="padding: 1rem;">
                        <i class="fas fa-download" style="color: var(--success-color);"></i>
                        <h4 style="font-size: 1rem; margin: 0.5rem 0;">multifasta_generator.py</h4>
                        <p style="font-size: 0.85rem;">Vers√£o CLI do gerador multiFASTA</p>
                    </div>
                    <div class="tool-card" style="padding: 1rem;">
                        <i class="fas fa-download" style="color: var(--success-color);"></i>
                        <h4 style="font-size: 1rem; margin: 0.5rem 0;">bactopia_helper.sh</h4>
                        <p style="font-size: 0.85rem;">Scripts auxiliares para Bactopia</p>
                    </div>
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Integra√ß√£o com GitHub Pages:</h3>
                <div class="output-area">
# 1. Fork ou clone o reposit√≥rio
git clone https://github.com/Felipeleii/bioinfo-scripts.git
cd bioinfo-scripts

# 2. Crie uma branch gh-pages
git checkout -b gh-pages

# 3. Adicione o arquivo index.html (este site)
# Copie todo o conte√∫do HTML para index.html

# 4. Commit e push
git add index.html
git commit -m "Add unified bioinfo scripts website"
git push origin gh-pages

# 5. Ative GitHub Pages nas configura√ß√µes do reposit√≥rio
# Settings ‚Üí Pages ‚Üí Source: gh-pages branch

# Seu site estar√° dispon√≠vel em:
# https://felipeleii.github.io/bioinfo-scripts/
                </div>

                <h3 style="margin-top: 2rem; margin-bottom: 1rem;">Estrutura Recomendada do Reposit√≥rio:</h3>
                <div class="output-area">
bioinfo-scripts/
‚îú‚îÄ‚îÄ index.html              # Este arquivo (site principal)
‚îú‚îÄ‚îÄ README.md               # Documenta√ß√£o do projeto
‚îú‚îÄ‚îÄ LICENSE                 # Licen√ßa (MIT recomendada)
‚îú‚îÄ‚îÄ environment.yml         # Depend√™ncias Conda
‚îú‚îÄ‚îÄ requirements.txt        # Depend√™ncias Python
‚îÇ
‚îú‚îÄ‚îÄ scripts/                # Scripts principais
‚îÇ   ‚îú‚îÄ‚îÄ quality_control/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fastq_qc.sh
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ multiqc_runner.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trim_adapters.sh
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ assembly/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ spades_assembly.sh
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unicycler_hybrid.sh
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assembly_stats.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ annotation/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prokka_batch.sh
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bakta_annotate.sh
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ extract_genes.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utilities/
‚îÇ       ‚îú‚îÄ‚îÄ multifasta_generator.py
‚îÇ       ‚îú‚îÄ‚îÄ bactopia_prepare.py
‚îÇ       ‚îî‚îÄ‚îÄ fastq_stats.py
‚îÇ
‚îú‚îÄ‚îÄ examples/               # Arquivos de exemplo
‚îÇ   ‚îú‚îÄ‚îÄ sample_data/
‚îÇ   ‚îî‚îÄ‚îÄ tutorials/
‚îÇ
‚îî‚îÄ‚îÄ docs/                   # Documenta√ß√£o adicional
    ‚îú‚îÄ‚îÄ installation.md
    ‚îú‚îÄ‚îÄ usage_guide.md
    ‚îî‚îÄ‚îÄ troubleshooting.md
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2024 Bioinfo Scripts v3.0. Desenvolvido com <i class="fas fa-heart" style="color: var(--error-color);"></i> para a comunidade de bioinform√°tica.</p>
            <div class="social-links">
                <a href="https://github.com/Felipeleii/bioinfo-scripts" target="_blank" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="#" title="Email">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="#" title="Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }

        // Tab switching
        function switchTab(tabName, element) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            element.classList.add('active');
        }

        // MultiFASTA Generator Functions
        document.getElementById('singleFastaForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const fileInput = document.getElementById('fastaFile');
            const file = fileInput.files[0];
            const prefix = document.getElementById('samplePrefix').value || file.name.replace(/\.[^/.]+$/, "");
            
            showProgress('fastaProgress');
            
            try {
                const content = await readFile(file);
                const processed = processFasta(content, prefix);
                displayOutput('fastaOutput', processed);
                showActions('fastaActions');
                updateProgress('fastaProgressBar', 100);
            } catch (error) {
                showAlert('Erro ao processar arquivo: ' + error.message, 'error');
            }
        });

        document.getElementById('batchFastaForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const filesInput = document.getElementById('fastaFiles');
            const files = Array.from(filesInput.files);
            const mergeOption = document.getElementById('mergeOption').value;
            
            showProgress('fastaProgress');
            
            try {
                let allProcessed = [];
                let currentProgress = 0;
                const progressStep = 100 / files.length;
                
                for (const file of files) {
                    const content = await readFile(file);
                    const prefix = file.name.replace(/\.[^/.]+$/, "");
                    const processed = processFasta(content, prefix);
                    
                    if (mergeOption === 'merge') {
                        allProcessed.push(processed);
                    } else {
                        // Handle separate files - in a real implementation, you'd save each file
                        allProcessed.push(`=== ${file.name} ===\n${processed}\n`);
                    }
                    
                    currentProgress += progressStep;
                    updateProgress('fastaProgressBar', Math.round(currentProgress));
                }
                
                const finalOutput = allProcessed.join('\n');
                displayOutput('fastaOutput', finalOutput);
                showActions('fastaActions');
            } catch (error) {
                showAlert('Erro ao processar arquivos: ' + error.message, 'error');
            }
        });

        function processFasta(content, prefix) {
            const lines = content.split('\n');
            let processed = [];
            let contigCounter = 1;
            
            for (let line of lines) {
                if (line.startsWith('>')) {
                    // Extract original contig name
                    const originalName = line.substring(1).trim();
                    // Create new header with sample prefix
                    const newHeader = `>${prefix}_contig${contigCounter}_${originalName}`;
                    processed.push(newHeader);
                    contigCounter++;
                } else {
                    processed.push(line);
                }
            }
            
            return processed.join('\n');
        }

        // Bactopia Prepare Functions
        document.getElementById('bactopiaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const projectName = document.getElementById('projectName').value;
            const fastqDir = document.getElementById('fastqDir').value;
            const sampleSheet = document.getElementById('sampleSheet').value;
            
            const config = generateBactopiaConfig({
                projectName,
                fastqDir,
                sampleSheet,
                qc: document.getElementById('qc').checked,
                assembly: document.getElementById('assembly').checked,
                annotation: document.getElementById('annotation').checked,
                mlst: document.getElementById('mlst').checked,
                amr: document.getElementById('amr').checked
            });
            
            displayOutput('bactopiaOutput', config);
            showActions('bactopiaActions');
        });

        function generateBactopiaConfig(params) {
            let config = `# Bactopia Configuration\n`;
            config += `# Project: ${params.projectName}\n`;
            config += `# Generated: ${new Date().toISOString()}\n\n`;
            
            config += `# Input Configuration\n`;
            config += `fastq_dir: ${params.fastqDir}\n`;
            config += `project_name: ${params.projectName}\n\n`;
            
            config += `# Sample Sheet\n`;
            config += `# Save this section as 'samples.txt'\n`;
            config += params.sampleSheet + '\n\n';
            
            config += `# Pipeline Parameters\n`;
            if (params.qc) config += `--qc\n`;
            if (params.assembly) config += `--assembly\n`;
            if (params.annotation) config += `--annotation\n`;
            if (params.mlst) config += `--mlst\n`;
            if (params.amr) config += `--amr\n`;
            
            return config;
        }

        function generateBactopiaCommand() {
            const projectName = document.getElementById('projectName').value;
            const fastqDir = document.getElementById('fastqDir').value;
            
            let command = `bactopia \\\n`;
            command += `  --fastqs ${fastqDir} \\\n`;
            command += `  --samples samples.txt \\\n`;
            command += `  --outdir ${projectName}_results \\\n`;
            command += `  --cpus 8 \\\n`;
            command += `  --max_memory 32g`;
            
            displayOutput('bactopiaOutput', command);
        }

        // Utility Functions
        async function readFile(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = e => resolve(e.target.result);
                reader.onerror = reject;
                reader.readAsText(file);
            });
        }

        function showProgress(containerId) {
            document.getElementById(containerId).style.display = 'block';
        }

        function updateProgress(barId, percent) {
            const bar = document.getElementById(barId);
            bar.style.width = percent + '%';
            bar.textContent = percent + '%';
        }

        function displayOutput(outputId, content) {
            const output = document.getElementById(outputId);
            output.textContent = content;
            output.style.display = 'block';
        }

        function showActions(actionsId) {
            document.getElementById(actionsId).style.display = 'block';
        }

        function downloadFasta() {
            const content = document.getElementById('fastaOutput').textContent;
            downloadFile(content, 'processed_multifasta.fasta', 'text/plain');
        }

        function downloadBactopiaConfig() {
            const content = document.getElementById('bactopiaOutput').textContent;
            downloadFile(content, 'bactopia_config.txt', 'text/plain');
        }

        function downloadFile(content, filename, type) {
            const blob = new Blob([content], { type });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyToClipboard(elementId) {
            const content = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(content).then(() => {
                showAlert('Copiado para a √°rea de transfer√™ncia!', 'success');
            }).catch(err => {
                showAlert('Erro ao copiar: ' + err.message, 'error');
            });
        }

        function showAlert(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                ${message}
            `;
            
            const firstSection = document.querySelector('.section');
            firstSection.insertBefore(alertDiv, firstSection.firstChild);
            
            setTimeout(() => alertDiv.remove(), 5000);
        }

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Update section navigation on scroll
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.section-nav a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (scrollY >= (sectionTop - 200)) {
                    current = section.getAttribute('id');
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href').slice(1) === current) {
                    link.classList.add('active');
                }
            });
        });

        // Add fade-in animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all cards
        document.querySelectorAll('.card, .tool-card').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(card);
        });

        // FASTQ Statistics Calculator
        document.getElementById('fastqStatsForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const fileInput = document.getElementById('fastqFile');
            const file = fileInput.files[0];
            
            document.getElementById('fastqSpinner').style.display = 'block';
            document.getElementById('fastqStatsOutput').style.display = 'none';
            
            try {
                const stats = await calculateFastqStats(file);
                displayFastqStats(stats);
                createCharts(stats);
                document.getElementById('fastqStatsOutput').style.display = 'block';
            } catch (error) {
                showAlert('Erro ao processar arquivo FASTQ: ' + error.message, 'error');
            } finally {
                document.getElementById('fastqSpinner').style.display = 'none';
            }
        });

        async function calculateFastqStats(file) {
            const content = await readFile(file);
            const lines = content.split('\n');
            
            let totalReads = 0;
            let totalBases = 0;
            let gcCount = 0;
            let lengths = [];
            let qualities = [];
            
            // Process FASTQ file (4 lines per read)
            for (let i = 0; i < lines.length; i += 4) {
                if (i + 3 >= lines.length) break;
                
                const header = lines[i];
                const sequence = lines[i + 1];
                const plus = lines[i + 2];
                const quality = lines[i + 3];
                
                if (header.startsWith('@') && plus === '+') {
                    totalReads++;
                    const seqLength = sequence.length;
                    totalBases += seqLength;
                    lengths.push(seqLength);
                    
                    // Count GC content
                    const gcInSeq = (sequence.match(/[GC]/gi) || []).length;
                    gcCount += gcInSeq;
                    
                    // Calculate average quality score
                    let qualSum = 0;
                    for (let j = 0; j < quality.length; j++) {
                        qualSum += quality.charCodeAt(j) - 33; // Phred+33 encoding
                    }
                    qualities.push(qualSum / quality.length);
                }
            }
            
            // Calculate statistics
            lengths.sort((a, b) => b - a);
            const n50 = calculateN50(lengths, totalBases);
            const avgLength = totalBases / totalReads;
            const gcContent = (gcCount / totalBases * 100).toFixed(2);
            const avgQuality = (qualities.reduce((a, b) => a + b, 0) / qualities.length).toFixed(1);
            
            return {
                totalReads,
                totalBases,
                avgLength: Math.round(avgLength),
                gcContent,
                avgQuality,
                n50,
                lengths,
                qualities
            };
        }

        function calculateN50(lengths, totalBases) {
            let sum = 0;
            const halfTotal = totalBases / 2;
            
            for (let length of lengths) {
                sum += length;
                if (sum >= halfTotal) {
                    return length;
                }
            }
            return 0;
        }

        function displayFastqStats(stats) {
            document.getElementById('totalReads').textContent = stats.totalReads.toLocaleString();
            document.getElementById('totalBases').textContent = stats.totalBases.toLocaleString();
            document.getElementById('avgLength').textContent = stats.avgLength.toLocaleString() + ' bp';
            document.getElementById('gcContent').textContent = stats.gcContent + '%';
            document.getElementById('avgQuality').textContent = stats.avgQuality;
            document.getElementById('n50').textContent = stats.n50.toLocaleString() + ' bp';
        }

        function createCharts(stats) {
            // Create length distribution histogram
            const lengthBins = createHistogram(stats.lengths, 20);
            createBarChart('lengthChart', 'Comprimento (bp)', lengthBins);
            
            // Create quality distribution histogram
            const qualityBins = createHistogram(stats.qualities, 20);
            createBarChart('qualityChart', 'Qualidade M√©dia', qualityBins);
        }

        function createHistogram(data, numBins) {
            const min = Math.min(...data);
            const max = Math.max(...data);
            const binWidth = (max - min) / numBins;
            const bins = new Array(numBins).fill(0);
            const labels = [];
            
            for (let i = 0; i < numBins; i++) {
                const binStart = min + i * binWidth;
                const binEnd = binStart + binWidth;
                labels.push(`${Math.round(binStart)}-${Math.round(binEnd)}`);
                
                for (let value of data) {
                    if (value >= binStart && value < binEnd) {
                        bins[i]++;
                    }
                }
            }
            
            return { labels, data: bins };
        }

        function createBarChart(canvasId, label, histData) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            
            // Simple bar chart implementation
            const width = canvas.width = canvas.offsetWidth;
            const height = canvas.height = 300;
            const padding = 40;
            const barWidth = (width - 2 * padding) / histData.labels.length;
            const maxValue = Math.max(...histData.data);
            
            // Clear canvas
            ctx.clearRect(0, 0, width, height);
            
            // Draw bars
            ctx.fillStyle = '#1976D2';
            histData.data.forEach((value, index) => {
                const barHeight = (value / maxValue) * (height - 2 * padding);
                const x = padding + index * barWidth;
                const y = height - padding - barHeight;
                
                ctx.fillRect(x, y, barWidth * 0.8, barHeight);
            });
            
            // Draw axes
            ctx.strokeStyle = '#666';
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();
            
            // Add label
            ctx.fillStyle = '#fff';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(label, width / 2, height - 10);
        }

        function downloadFastqReport() {
            const stats = {
                totalReads: document.getElementById('totalReads').textContent,
                totalBases: document.getElementById('totalBases').textContent,
                avgLength: document.getElementById('avgLength').textContent,
                gcContent: document.getElementById('gcContent').textContent,
                avgQuality: document.getElementById('avgQuality').textContent,
                n50: document.getElementById('n50').textContent
            };
            
            let report = `FASTQ Statistics Report\n`;
            report += `Generated: ${new Date().toISOString()}\n\n`;
            report += `Total Reads: ${stats.totalReads}\n`;
            report += `Total Bases: ${stats.totalBases}\n`;
            report += `Average Length: ${stats.avgLength}\n`;
            report += `GC Content: ${stats.gcContent}\n`;
            report += `Average Quality: ${stats.avgQuality}\n`;
            report += `N50: ${stats.n50}\n`;
            
            downloadFile(report, 'fastq_stats_report.txt', 'text/plain');
        }

        // Enhanced Bactopia command generator
        function generateBactopiaCommand() {
            const projectName = document.getElementById('projectName').value;
            const fastqDir = document.getElementById('fastqDir').value;
            
            let command = `#!/bin/bash\n\n`;
            command += `# Bactopia Pipeline Command\n`;
            command += `# Project: ${projectName}\n`;
            command += `# Generated: ${new Date().toISOString()}\n\n`;
            
            command += `# Create output directory\n`;
            command += `mkdir -p ${projectName}_results\n\n`;
            
            command += `# Run Bactopia\n`;
            command += `bactopia \\\n`;
            command += `  --fastqs ${fastqDir} \\\n`;
            command += `  --samples samples.txt \\\n`;
            command += `  --outdir ${projectName}_results \\\n`;
            command += `  --cpus 8 \\\n`;
            command += `  --max_memory 32g`;
            
            if (document.getElementById('qc').checked) command += ` \\\n  --qc`;
            if (document.getElementById('assembly').checked) command += ` \\\n  --assembly`;
            if (document.getElementById('annotation').checked) command += ` \\\n  --annotation`;
            if (document.getElementById('mlst').checked) command += ` \\\n  --mlst`;
            if (document.getElementById('amr').checked) command += ` \\\n  --amr`;
            
            command += `\n\n# Check results\n`;
            command += `echo "Pipeline completed! Check results in ${projectName}_results/"\n`;
            
            displayOutput('bactopiaOutput', command);
        }
    </script>
</body>
</html> 0.5rem;">
                        <i class="fas fa-chevron-right" style="color: var(--secondary-color);"></i>
                        <strong>fastq_quality.sh</strong> - An√°lise de qualidade com FastQC
                    </li>
                    <li style="margin-bottom:
